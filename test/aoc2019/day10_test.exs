defmodule Aoc2019.Day10Test do
  use ExUnit.Case
  doctest Aoc2019.Day10
  alias Aoc2019.Day10

  test "part1" do
    assert  """
    .#..#
    .....
    #####
    ....#
    ...##
    """ |> Day10.part1() == {%{x: 3, y: 4}, 8}


    assert  """
    .#..##.###...#######
    ##.############..##.
    .#.######.########.#
    .###.#######.####.#.
    #####.##.#.##.###.##
    ..#####..#.#########
    ####################
    #.####....###.#.#.##
    ##.#################
    #####.##.###..####..
    ..######..##.#######
    ####.##.####...##..#
    .#####..#.######.###
    ##...#.##########...
    #.##########.#######
    .####.#.###.###.#.##
    ....##.##.###..#####
    .#.#.###########.###
    #.#.#.#####.####.###
    ###.##.####.##.#..##
    """ |> Day10.part1() == {%{x: 11, y: 13}, 210}
  end

  test "part2" do
    assert  """
    .#....#####...#..
    ##...##.#####..##
    ##...#...#.#####.
    ..#.....#...###..
    ..#.#.....#....##
    """
    |> Day10.part2(9) == %{x: 15, y: 1}
  end

  test "part2 large example" do
    assert  """
    .#..##.###...#######
    ##.############..##.
    .#.######.########.#
    .###.#######.####.#.
    #####.##.#.##.###.##
    ..#####..#.#########
    ####################
    #.####....###.#.#.##
    ##.#################
    #####.##.###..####..
    ..######..##.#######
    ####.##.####...##..#
    .#####..#.######.###
    ##...#.##########...
    #.##########.#######
    .####.#.###.###.#.##
    ....##.##.###..#####
    .#.#.###########.###
    #.#.#.#####.####.###
    ###.##.####.##.#..##
    """ |> Day10.part2(200) == %{x: 8, y: 2}

  end


  test "sort_asteroids_by_distance_from_station/1" do

    assert Day10.sort_asteroids_by_distance_from_station([
      %{x: 11, y: 9},
      %{x: 11, y: 1},
      %{x: 11, y: 2},
      %{x: 11, y: 3},
      %{x: 11, y: 4},
      %{x: 11, y: 5},
      %{x: 11, y: 12},
      %{x: 11, y: 6},
      %{x: 11, y: 7},
      %{x: 11, y: 8},
      %{x: 11, y: 10},
      %{x: 11, y: 11},
    ], %{x: 11, y: 13}) |> List.first() == %{x: 11, y: 12}
  end
end
